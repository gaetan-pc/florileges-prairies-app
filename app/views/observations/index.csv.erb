	<% headers = [
	'obs_id',
	'site_id',
	'site_code',
	'releve_date',
	'releve_nom',
	'releve_structure',
	'releve_referents_email',
	'releve_time_start',
	'releve_time_end',
	'releve_hauteur',
	'releve_milieux',
	'releve_semis',
	'releve_fauche',
	'releve_fauche_periode',
	'releve_fauche_freq',
	'releve_fauche_export',
	'releve_paturage',
	'releve_paturage_pression',
	'releve_paturage_duree',
	'releve_traitement',
	'releve_pression',
	'obs_LB_NOM',
	'obs_NOM_VALIDE',
	'obs_CD_NOM',
	'obs_CD_REF',
	'obs_florileges_liste',
	'obs_TAXREF_V',
	'obs_q1',
	'obs_q2',
	'obs_q3',
	'obs_q4',
	'obs_q5',
	'obs_q6',
	'obs_q7',
	'obs_q8',
	'obs_q9',
	'obs_q10',
	'obs_hors_q'] %>
<%= CSV.generate_line(headers, {:row_sep => ''}).html_safe %>
<% @observations.each do |obs| %>
<%= CSV.generate_line([
	obs.id,
	obs.releve.site_id,
	obs.releve.site.code,
	obs.releve.date,
	obs.releve.name,
	obs.releve.structure,
	obs.releve.site.users.map { |u| "#{u.email}" }.join("|"),
	obs.releve.time_start.to_s.gsub("01/01/2000 ", '') ,
	obs.releve.time_end.to_s.gsub("01/01/2000 ", '') ,
	obs.releve.hauteur,
	obs.releve.milieux.split('|'),
	obs.releve.semis,
	obs.releve.fauche,
	obs.releve.fauche_periode,
	obs.releve.fauche_freq,
	obs.releve.fauche_export,
	obs.releve.paturage,
	obs.releve.paturage_pression,
	obs.releve.paturage_duree,
	obs.releve.traitement,
	obs.releve.pression,
	obs.taxon.lb_nom,
	obs.taxon.nom_valide,
	obs.taxon.cd_nom,
	obs.taxon.cd_ref,
	obs.taxon.florileges,
	"v8.0",
	obs.q1,
	obs.q2,
	obs.q3,
	obs.q4,
	obs.q5,
	obs.q6,
	obs.q7,
	obs.q8,
	obs.q9,
	obs.q10,
	obs.q0], {:row_sep => ''}).html_safe %>
<% end %>


